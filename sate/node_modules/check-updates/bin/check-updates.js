#!/usr/bin/env node

var checkUpdates = require('../index.js');
var chalk = require('chalk');
var options = require('commander');

var parseRegExp = function(regexp) {
    return new RegExp(regexp);
};

options
    .option('-n, --npm', 'Check only npm packages')
    .option('-b, --bower', 'Check only bower packages')
    .option('-m, --max-depth [depth]', 'Set max depth of dependencies to check (default 10)', parseInt)
    .option('-f, --npm-filter [regexp]', 'Set npm package filter (default ' + chalk.cyan('^@|\.\.') + ')', parseRegExp)
    .option('-g, --bower-filter [regexp]', 'Set bower package filter (default ' + chalk.cyan('/hp\.com|hpeswlab\.net/') + ')', parseRegExp)
    .option('-d, --no-dev', 'Ignore dev packages')
    .option('-o, --no-opt, --no-optional', 'Ignore optional packages')
    .option('-s, --satisfied', 'Include updates that are satisfied by current version range')
    .parse(process.argv);

if (!options.npm && !options.bower) {
    options.npm = options.bower = true;
} else if (options.npm) {
    options.bower = false;
} else if (options.bower) {
    options.npm = false;
}

checkUpdates(options);
